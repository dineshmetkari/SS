package com.stackroute.service;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.net.ssl.HttpsURLConnection;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import com.stackroute.model.ApiTermModel;

@Service
public class WordApiService {
	
	private String apiKey ="6APmmt7n4qmshF3dTBe5NpjLI0upp1S3KaNjsnMUv9hAipg5Qa";
	@Autowired
	 ApiTermModel apiTermModel;
	 
	public ApiTermModel ApiResults(String term){
		 String uri = "https://wordsapiv1.p.mashape.com/words/"+term +"/synonyms";	
		 
		 URL url;
			
		 HttpsURLConnection con;
		 try {
			url = new URL(uri);
			con = (HttpsURLConnection) url.openConnection();
		
		 con.setRequestProperty("Api-Key", apiKey);
		 con.setRequestProperty("Accept", "application/json");
		 con.setRequestProperty("Content-Type", "application/json;charset=UTF-8");
		 con.setRequestMethod("GET");
		 con.connect();
		 apiTermModel= (ApiTermModel) con.getContent();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		 
//	 String uri = "https://wordsapiv1.p.mashape.com/words/"+term +"/synonyms";
//	 RestTemplate restTemplate = new RestTemplate();
//	  ApiTermModel apiTermModel = restTemplate.getForObject(uri, ApiTermModel.class);
		return apiTermModel;
}
}
